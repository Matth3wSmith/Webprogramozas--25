<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hőmérséklet</title>
    <style>
        table, th, td {
            border: 1px solid black;
            border-collapse: collapse;
        }
        th, td {
            padding: 5px;
            text-align: center;
        }
        input,label{
            margin-top: 10px;
        }
        .hidden{
            display: none;
        }
    </style>
</head>
<body>

    <!--
    Jelenítse meg az aktuális időpontban mind a 10 város hőmérsékletét
    Városnevek szerint legyen rendezve
    Napi átlag hőmérséklet
    7-5-ig a hőmérséklet átlaga, országosan
    Max és min hőmérséklet, városa, ha egyezés van mindegyik város kiírása
    --->

    <p id="demo">hello world</p>
    <table id = "table" >
        <tr id="header">
            <th>Település</th>
        </tr>
    </table>

    <table id="elsoF" class="hidden">
        <tr>
        </tr>
    </table>
    <label for="ido">Adj meg egy időpontot: </label>
    <input type="number" name="" id="ido">
    <button onclick="idoHomerseklet()">Megjelenítés</button>
</body>
<script>
    //Fejlécsor feltöltése
    let header = document.getElementById("header");
    let table = document.getElementById("table");
    for(let i = 0; i < 24; i++){
        header.innerHTML += `<th>${i}:00</th>`;
    }
    let file = "adatok.json";
    fetch (file)
    .then(x => x.json())
    .then(adatok => {
        Object.values(adatok).map((foktomb, i)=> {
            let tr = document.createElement("tr");
            tr.innerHTML += `<td>${Object.keys(adatok)[i]}</td>`;
            foktomb.map(fok => tr.innerHTML += `<td>${fok}</td>`);
            table.children[0].appendChild(tr);
        });

    });

    function  idoHomerseklet(){
        let idopont = Number(document.getElementById("ido").value);
        let elsoF = document.getElementById("elsoF");
        fetch (file)
        .then(x => x.json())
        .then(adatok =>{
            console.log(adatok);
            elsoF.classList.remove("hidden");
            console.log(elsoF.children);
            elsoF.children[0].children[0].innerHTML=""
            elsoF.children[0].children[0].innerHTML += `<td>${idopont}:00</td>`;
            for (let i = 0; i < Object.values(adatok).length;i++){
                elsoF.children[0].children[0].innerHTML += `<td>${Object.values(adatok)[i][idopont]}</td>`;
            }
            Array.from(table.children[0].children).map(tr => {
                console.log(tr);
                console.log(tr.children);
                console.log(tr.children[idopont + 1]);
                tr.children[idopont + 1].style.backgroundColor = "yellow";
            })
        });
    }
</script>
</html>